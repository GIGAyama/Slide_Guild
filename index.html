<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <?!= include('css'); ?>
  </head>
  <body>
    <!-- ナビゲーション -->
    <nav class="navbar navbar-expand fixed-top shadow-sm custom-navbar">
      <div class="container-fluid justify-content-center">
        <ul class="navbar-nav nav-pills">
          <li class="nav-item mx-2">
            <!-- 修正: onclickで this を渡すように変更 -->
            <button class="nav-link active" onclick="switchView(this, 'quest-view')">
              <i class="bi bi-journal-bookmark-fill"></i> <ruby>冒険<rt>ぼうけん</rt></ruby>の<ruby>書<rt>しょ</rt></ruby>
            </button>
          </li>
          <li class="nav-item mx-2">
            <button class="nav-link" onclick="switchView(this, 'gallery-view')">
              <i class="bi bi-people-fill"></i> <ruby>ギルド<rt>広場</rt></ruby>
            </button>
          </li>
        </ul>
      </div>
    </nav>

    <!-- メインコンテンツ -->
    <div class="container pb-5" style="margin-top: 80px;">
      
      <!-- 1. クエスト一覧 -->
      <div id="quest-view" class="view-section">
        <div class="text-center mb-4 section-header">
          <h5 class="fw-bold text-dark"><i class="bi bi-compass"></i> クエストを<ruby>選<rt>えら</rt></ruby>ぼう</h5>
        </div>
        <div id="quest-list"></div>
      </div>

      <!-- 2. ギャラリー -->
      <div id="gallery-view" class="view-section d-none">
        <div class="text-center mb-4 section-header">
          <h5 class="fw-bold text-dark"><i class="bi bi-collection-play"></i> みんなの<ruby>作品<rt>さくひん</rt></ruby></h5>
          <button class="btn btn-sm btn-outline-warning rounded-pill fw-bold mt-2" onclick="loadGallery()">
            <i class="bi bi-arrow-clockwise"></i> <ruby>更新<rt>こうしん</rt></ruby>
          </button>
        </div>
        <div id="gallery-list" class="row g-4"></div>
      </div>
    </div>

    <!-- フッター -->
    <footer class="text-center py-3 mt-4 border-top">
      <small class="text-muted">© 2026 Slide Guild <a href="https://note.com/cute_borage86" target="_blank" class="text-decoration-none text-warning">GIGA山</a></small>
    </footer>

    <!-- ローディング -->
    <div id="loading-overlay" class="d-none">
      <div class="spinner-border text-warning" role="status" style="width: 3rem; height: 3rem;"></div>
      <p class="mt-3 text-dark fw-bold"><ruby>通信中<rt>つうしんちゅう</rt></ruby>...</p>
    </div>

    <!-- JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <?!= include('js'); ?>
  </body>
</html>
