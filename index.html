<!DOCTYPE html>
<html>

<head>
  <base target="_top">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  <?!= include('css'); ?>
</head>

<body>
  <!-- ナビゲーション -->
  <nav class="navbar navbar-expand fixed-top shadow-sm custom-navbar">
    <div class="container-fluid justify-content-center">
      <ul class="navbar-nav nav-pills">
        <li class="nav-item mx-2">
          <!-- 修正: onclickで this を渡すように変更 -->
          <button class="nav-link active" onclick="switchView(this, 'quest-view')">
            <i class="bi bi-journal-bookmark-fill"></i> <ruby>冒険<rt>ぼうけん</rt></ruby>の<ruby>書<rt>しょ</rt></ruby>
          </button>
        </li>
        <li class="nav-item mx-2">
          <button class="nav-link" onclick="switchView(this, 'gallery-view')">
            <i class="bi bi-people-fill"></i> <ruby>ギルド<rt>広場</rt></ruby>
          </button>
        </li>
      </ul>
    </div>
  </nav>

  <!-- メインコンテンツ -->
  <div class="container pb-5" style="margin-top: 80px;">

    <!-- 1. クエスト一覧 -->
    <div id="quest-view" class="view-section">
      <div class="text-center mb-4 section-header">
        <h5 class="fw-bold text-dark"><i class="bi bi-compass"></i> クエストを<ruby>選<rt>えら</rt></ruby>ぼう</h5>
      </div>
      <div id="quest-list"></div>
    </div>

    <!-- 2. ギャラリー -->
    <div id="gallery-view" class="view-section d-none">
      <div class="text-center mb-4 section-header">
        <h5 class="fw-bold text-dark"><i class="bi bi-collection-play"></i> みんなの<ruby>作品<rt>さくひん</rt></ruby></h5>
        <button class="btn btn-sm btn-outline-warning rounded-pill fw-bold mt-2" onclick="loadGallery()">
          <i class="bi bi-arrow-clockwise"></i> <ruby>更新<rt>こうしん</rt></ruby>
        </button>
      </div>
      <div id="gallery-list" class="row g-4"></div>
    </div>
  </div>

  <!-- フッター -->
  <footer class="text-center py-3 mt-4 border-top">
    <small class="text-muted">© 2026 Slide Guild <a href="https://note.com/cute_borage86" target="_blank"
        class="text-decoration-none text-warning">GIGA山</a></small>
  </footer>

  <!-- Toast Container for Notifications -->
  <div class="toast-container position-fixed bottom-0 end-0 p-3">
    <div id="liveToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
      <div class="toast-header">
        <strong class="me-auto" id="toast-title">Notification</strong>
        <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
      </div>
      <div class="toast-body" id="toast-body">
        Hello, world! This is a toast message.
      </div>
    </div>
  </div>

  <!-- Gallery Modal -->
  <div class="modal fade" id="galleryModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-xl">
      <div class="modal-content" style="background: transparent; border: none;">
        <div class="modal-body p-0 position-relative">
          <button type="button" class="btn-close btn-close-white position-absolute top-0 end-0 m-2 z-3"
            data-bs-dismiss="modal" aria-label="Close"></button>
          <div class="ratio ratio-16x9 shadow-lg rounded overflow-hidden bg-black">
            <iframe id="gallery-iframe" src="" allowfullscreen="true" mozallowfullscreen="true"
              webkitallowfullscreen="true"></iframe>
          </div>
          <div class="text-center mt-3">
            <button class="btn btn-light rounded-pill fw-bold" data-bs-dismiss="modal">
              <i class="bi bi-x-circle"></i> 閉じる
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <?!= include('js'); ?>
</body>

</html>